{% extends "base.html" %} {% block content %}

<br /><br />
<h1>{{library.title}}</h1>
<p>{{library.description}}</p>
{% if create %}
<button
  class="btn btn-primary"
  type="button"
  data-toggle="modal"
  data-target="#createForm"
  aria-expanded="false"
  aria-controls="collapseExample"
>
  +
</button>
<form
  action=""
  method="POST"
  novalidate
  class="modal fade"
  tabindex="-1"
  role="dialog"
  aria-hidden="true"
  id="createForm"
>
  {{ create.hidden_tag() }}
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">New Copy</h5>
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>{{ create.gid.label }}</label>
          {{ create.gid(class_="form-control") }}
        </div>
        <div class="form-group">
          <label>{{ create.comment.label }}</label>
          {{ create.comment(class_="form-control") }}
        </div>
        <div class="form-group">
          <label>{{ create.borrower.label }}</label>
          {{ create.borrower(class_="form-control") }}
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">
          Close
        </button>
        {{ create.submit(class_="btn btn-primary text-light")}}
      </div>
    </div>
  </div>
</form>
{% endif %}
<table
  class="table table-hover table-primary table-striped table-bordered container"
>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Copy</th>
      <th scope="col">Comment</th>
      <th scope="col">Borrower</th>
      <th scope="col">Link</th>
    </tr>
  </thead>
  <tbody>
    {% for copy in copies%}
    <tr>
      <th scope="row">{{ copy.game.name }}</th>
      <td>{{copy.comment}}</td>
      {% if copy.borrower %}
      <td>{{copy.borrower.name}}</td>
      {% else %}
      <td><a href="{{ url_for('library.checkout', lid=library.lid, cpid=copy.cpid) }}" class="badge bg-primary text-light">Borrow</a></td>
      {% endif %}
      <td>
        <a
          href="{{ url_for('game.game', gid=copy.game.gid) }}"
          class="badge bg-primary text-light"
          role="button"
          >GO</a
        >
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<a
  href="{{ url_for('library.libraries') }}"
  role="button"
  class="btn btn-danger"
  >Back</a
>
{% endblock %}
